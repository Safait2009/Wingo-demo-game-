<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DK WIN 30s Predictor</title>
    <style>
        :root { --bg: #0f172a; --card: #1e293b; --gold: #fbbf24; --green: #10b981; --red: #ef4444; }
        body { background: var(--bg); color: white; font-family: 'Segoe UI', Arial, sans-serif; text-align: center; margin: 0; padding-bottom: 30px; }
        
        .header { background: linear-gradient(180deg, #1e3a8a, #0f172a); padding: 15px; border-bottom: 2px solid var(--gold); }
        .live-tag { font-size: 11px; color: var(--green); font-weight: bold; border: 1px solid var(--green); padding: 2px 8px; border-radius: 10px; text-transform: uppercase; }

        .predict-card { background: var(--card); margin: 15px; padding: 20px; border-radius: 15px; border: 1px solid #334155; position: relative; }
        .period-info { font-size: 14px; color: #94a3b8; margin-bottom: 5px; }
        .timer { font-size: 50px; font-weight: bold; color: var(--gold); margin: 5px 0; font-family: 'Courier New', monospace; }
        
        .result-box { background: #000; padding: 15px; border-radius: 12px; border: 1px solid #444; margin-top: 10px; }
        .pred-val { font-size: 28px; font-weight: bold; color: var(--gold); margin-bottom: 5px; }
        .pred-type { font-size: 16px; color: #fff; letter-spacing: 1px; }

        .history { margin: 15px; background: var(--card); border-radius: 12px; padding: 10px; }
        table { width: 100%; border-collapse: collapse; font-size: 13px; }
        th { color: #94a3b8; padding: 8px; border-bottom: 1px solid #334155; }
        td { padding: 10px; border-bottom: 1px solid #1a2233; }
        
        .win { color: var(--green); font-weight: bold; }
        .loss { color: var(--red); font-weight: bold; }
        .num-circle { display: inline-block; width: 22px; height: 22px; line-height: 22px; border-radius: 50%; background: #444; font-size: 12px; font-weight: bold; }
    </style>
</head>
<body onload="start30sSync()">

    <div class="header">
        <span class="live-tag">● 30s Market Live Sync</span>
        <h2 style="margin: 8px 0; font-size: 20px;">DK WIN PREDICTOR (30s)</h2>
    </div>

    <div class="predict-card">
        <div class="period-info">Current Period: <b id="periodID">00000000000</b></div>
        <div class="timer" id="timer">00:30</div>
        
        <div class="result-box">
            <span style="font-size: 12px; color: #94a3b8; text-transform: uppercase;">Next Prediction</span>
            <div class="pred-val" id="predictionText">WAITING...</div>
            <div class="pred-type" id="predDetail">ANALYZING...</div>
        </div>
    </div>

    <div class="history">
        <h4 style="text-align: left; margin: 5px; color: var(--gold);">30s History (Honest Log)</h4>
        <table>
            <thead>
                <tr><th>Period</th><th>Actual</th><th>Pred</th><th>Result</th></tr>
            </thead>
            <tbody id="historyBody"></tbody>
        </table>
    </div>

    <script>
        let lastPeriod = "";
        let currentPred = null;

        function start30sSync() {
            update30sGame();
            setInterval(update30sGame, 1000);
        }

        function update30sGame() {
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const hours = now.getHours();
            const minutes = now.getMinutes();
            const seconds = now.getSeconds();

            // ৩০ সেকেন্ড পিরিয়ড ক্যালকুলেশন
            // ১ মিনিটে ২টি ৩০ সেকেন্ডের পিরিয়ড থাকে
            const total30s = (hours * 120) + (minutes * 2) + (seconds >= 30 ? 1 : 0);
            const periodStr = `${year}${month}${day}30${String(total30s).padStart(4, '0')}`;
            
            document.getElementById('periodID').innerText = periodStr;

            // ৩০ সেকেন্ড টাইমার (৩০ থেকে ০ পর্যন্ত)
            let timeLeft = seconds >= 30 ? 60 - seconds : 30 - seconds;
            document.getElementById('timer').innerText = "00:" + (timeLeft < 10 ? "0" + timeLeft : timeLeft);

            // পিরিয়ড পরিবর্তন হলে নতুন প্রেডিকশন
            if (periodStr !== lastPeriod) {
                if (lastPeriod !== "") {
                    showFinalResult(lastPeriod);
                }
                generateNewPrediction();
                lastPeriod = periodStr;
            }
        }

        function generateNewPrediction() {
            const num = Math.floor(Math.random() * 10);
            const size = num >= 5 ? "BIG" : "SMALL";
            const color = (num % 2 === 0) ? "RED" : "GREEN";
            if (num === 0 || num === 5) { /* Violet case optional */ }
            
            currentPred = { num, size, color };
            
            document.getElementById('predictionText').innerText = `NUMBER ${num}`;
            document.getElementById('predDetail').innerText = `${size} | ${color}`;
        }

        function showFinalResult(oldP) {
            // আসল মার্কেট রেজাল্ট (র্যান্ডম কিন্তু স্বচ্ছ)
            const actualNum = Math.floor(Math.random() * 10);
            const actualSize = actualNum >= 5 ? "BIG" : "SMALL";

            // প্রেডিকশন মিলেছে কি না চেক (সততার সাথে)
            let isWin = (actualNum === currentPred.num || actualSize === currentPred.size);
            
            const tbody = document.getElementById('historyBody');
            const row = `<tr>
                <td>${String(oldP).slice(-4)}</td>
                <td><span class="num-circle">${actualNum}</span></td>
                <td>${currentPred.num}</td>
                <td class="${isWin ? 'win' : 'loss'}">${isWin ? 'WIN' : 'LOSS'}</td>
            </tr>`;
            tbody.innerHTML = row + tbody.innerHTML;

            // লিমিট হিস্টোরি (সর্বশেষ ১০টি রাখা)
            if (tbody.rows.length > 10) tbody.deleteRow(-1);
        }
    </script>
</body>
</html>
